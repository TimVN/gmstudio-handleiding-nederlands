<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<title>Networking Event</title>
		<meta http-equiv="X-UA-Compatible" content="IE=9" />
		<link rel="stylesheet" href="../../style.css" type="text/css" media="screen" title="style" charset="utf-8"/>
	</head>
<body>


<h1>Networking Event</h1>

<h2>This is the sub event that will be triggered when using the networking functions.</h2>

<p>
The Networking event is one which will be triggered by any incoming network traffic, and is linked to the <a href="../../002_Reference/Networking/index.html">Network Functions</a>. This event generates 
a special <a href="../../002_Reference/Data%20Structures/DS%20Maps/index.html"></tt>ds_map</tt></a> (more commonly known as a "dictionary") that is exclusive to this event and is stored in the special 
variable <b>async_load</b>. This <tt>ds_map</tt> will contain different information depending on the type of network event that generated it.

<h3>Common</h3>
<p>
The following keys are common to all received network functions and will always be present in the <tt>async_load</tt> map: 

<blockquote>
	<ol>
		<li><b>"type": </b>This will have one of the constants listed below as it's return value, and designates the network event type.</li><br>
		
		<li><b>"id": </b>The socket id (a real number, as returned by the <a href="../../002_Reference/Networking/network_create_server.html">network_create_server</a> or 
		<a href="../../002_Reference/Networking/network_create_socket.html">network_create_socket</a> functions that is receiving the event.</li><br>
		
		<li><b>"ip": </b>The IP address of the socket (as a string).</li><br>
		
	</ol>
</blockquote>
<p>
The possible return values for the "type" key can be any of the three constants listed below:
<div class="compat">
	<table>
		<tr><th>Constant</th><th>Description</th></tr>
		<tr><td>network_type_connect</td><td>The event was triggered by a connection.</td></tr>
		<tr class="alt"><td>network_type_disconnect</td><td>The event was triggered by a disconnection.</td></tr>
		<tr><td>network_type_data</td><td>The event was triggered by incoming data.</td></tr>
	</table>
</div>
 
<h3>Connecting</h3>
<p>
When you have an event of the type <tt>network_type_connect</tt> or <tt>network_type_disconnect</tt>, the <tt>async_load</tt> map will have the following additional key:

<blockquote>
	<ol>
		<li><b>"socket": </b>This key will hold the connecting/disconnecting socket id.</li><br>
	</ol>
</blockquote>

<h3>Receiving Data</h3>
<p>
When you have a <tt>network_type_data</tt> type event, which signifies that your network has received data, the map created will have the following keys:

<blockquote>
	<ol>
		<li><b>"buffer": </b>This is the unique "buffer id" which is generated by the event. A "grow" type buffer, byte aligned to 1, is created to hold the id should be stored in a variable and used for all 
		further function calls to the buffer <i><b>in this event</b></i>. Just like the <tt>async_load</tt> map, the buffer created is automatically removed from memory at the end of this event. 
		For more information on buffers, please see <a href="../../002_Reference/Buffers/index.html">Reference - Buffers</a></li><br>
		
		<li><b>"size": </b>This is the size (in bytes) of the buffer data that is being received.</li><br>
				
	</ol>
</blockquote>

<p>
<i><b>NOTE : </b>The map held in the <tt>async_load</tt> variable is only valid in these events, as the ds_map that is points to is created at the start of the event, then deleted again at the end, with this 
variable being reset to a value of -1 in all other events. If you have received data, then the same will happen with the buffer created - it is only available in this event and will be freed when the event is over.</i>
<br>
<br>

<p>
<br>
</p>
<p>

<div class="clear">
	<div style="float:left">
		Back : <a href="index.html">More About Async Events</a>
	</div>
	<div style="float:right">
		Next : <a href="Image%20Loaded%20and%20Sound%20Loaded%20Events.html">Image Loaded and Sound Loaded Events</a>
	</div>
</div>
</p>

<h5>&copy; Copyright YoYo Games Ltd. 2013 All Rights Reserved</h5></body>
</html>

<!-- KEYWORDS
async_load
Networking Event
connecting
disconnecting
incoming data
-->